<div class="container py-5">
  <div class="card shadow p-4 text-center position-relative">

    
    <div *ngIf="loading" class="loading-overlay">
      <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3 text-light">Loading report, please wait...</p>
    </div>

    <h2 class="mb-4">Report Details</h2>

    <div *ngIf="!loading && report">
      <h5>ğŸ“Œ Prompt</h5>
      <p class="text-muted">{{ report.prompt }}</p>

      <h5 class="mt-4">ğŸ“ AI Generated Report</h5>

      <div class="ai-report text-start">
        <markdown [data]="reportText"></markdown>
      </div>

      <div class="d-flex gap-3 mt-4">
        <a class="btn btn-success flex-grow-1" [href]="pdfUrl" target="_blank" download>â¬‡ï¸ Download PDF</a>
        <button class="btn btn-outline-secondary flex-grow-1" (click)="goBack()">ğŸ”™ Back to History</button>
      </div>

      <div class="mt-5" *ngIf="report.chartData">
        <h5>ğŸ“Š Chart Visualization</h5>
        <app-chart [chartSummary]="report.chartData"></app-chart>
      </div>
    </div>

    <div *ngIf="!loading && !report" class="text-muted">
      âš ï¸ No report found.
    </div>
  </div>
</div>
