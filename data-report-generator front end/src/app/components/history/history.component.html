<div class="history-container py-5">
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-header bg-primary text-white text-center py-3 rounded-top">
      <h2 class="mb-0">ğŸ“Š Report History</h2>
    </div>

    <div class="card-body p-4">
      <table class="table table-hover align-middle" *ngIf="reports && reports.length">
        <thead class="table-primary">
          <tr>
            <th>#</th>
            <th>Report Name</th>
            <th>Date Created</th>
            <th>Prompt</th>
            <th class="text-center">Actions</th>
            <th class="text-center">PDF</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let report of reports; let i = index">
            <td>{{ i + 1 }}</td>
            <td class="fw-semibold">{{ report.title || 'Report' }}</td>
            <td>{{ report.created_at | date: 'medium' }}</td>
            <td class="text-truncate" style="max-width: 200px;">{{ report.prompt }}</td>

            <td class="text-center">
              <button 
                class="btn btn-sm btn-outline-primary me-2" 
                (click)="viewReport(report.id)">
                ğŸ‘ï¸ View
              </button>

              <button 
                class="btn btn-sm btn-outline-danger" 
                (click)="deleteReport(report.id)">
                ğŸ—‘ï¸ Delete
              </button>
            </td>

            <td class="text-center">
              <a *ngIf="report.pdfPath" 
                 class="btn btn-sm btn-success px-3" 
                 [href]="getPdfUrl(report.pdfPath)" 
                 target="_blank" download>
                â¬‡ï¸ PDF
              </a>
            </td>
          </tr>
        </tbody>
      </table>

      <div *ngIf="!reports || reports.length === 0" class="py-4 text-center text-muted">
        <p class="fs-5">âš ï¸ No reports available yet.</p>
      </div>
    </div>
  </div>
</div>
